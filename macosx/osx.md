# osx

最近使用了一段时间的MAC, 适应了很长的时间, 这里是一些很初级的指南, 可节省很大量的探索.

## 快捷键

在Windows系统下常用的快捷键是Ctrl, 但在OSX系统下常用的快捷键是Command, 以下简称Cmd.

OS X下的快捷键的字符比较特殊, 如`Command ⌘`, `Option ⌥`, `Shift ⇧`, `Control ⌃`. 认识符号, 就可以在每个应用的顶部菜单中查看相应操作的快捷键.

* `Cmd + t`, 打开新标签
* `Cmd + w`, 关闭当前标签
* `Cmd + n`, 打开新窗口
* `Cmd + d`, 添加标签到收藏夹
* `Cmd + l`, 选择地址栏
* `Cmd + 1/2/3`, 选择标签
* `Cmd + ,`, 打开偏好设置
* `Cmd + q`, 退出应用
* `Cmd + s`, 保存文件或改动

这三个快捷键基本是通用的, 在浏览器, 终端等.

* `Cmd + c`, 复制
* `Cmd + v`, 粘贴

很遗憾, OSX没有剪切这一说法.

* `Cmd + del`, 删除

除了删除普通文件外, 还可以删除通过图形界面安装的应用. 在`应用程序`目录下, 删除程序文件`.app`就是卸载程序了. 当然此处不包括通过brew安装的.

* `Cmd + tab`, 用于任务切换
* `Cmd + space`, 用于输入法切换

任务不同于窗口, 窗口是当前在屏幕上的窗口, 但可能有重叠, 任务则可能隐藏了窗口.

除了键盘快捷键, 还有触控板. MAC下的触控板要好好利用.

* 双指上下划, 用于上下滚动
* 双指左右轻扫, 用于标签历史切换
* 双指从右边缘向左轻扫, 打开通知中心
* 双指捏合, 放大或缩小
* 双指轻点一下, 用于右键弹出
* 双指轻点两下, 用于智能绽放
* 三指作用于窗口, 用于移动窗口
* 三指在任意文字轻点, 弹出翻译
* 三指在文字轻扫, 用于选取文字
* 三指左右轻扫, 用于在全屏应用间切换
* 四指上划, 用于所有应用窗口选择
* 四指下划, 用于同应用窗口选择

三指拖拽功能在最新版本系统中被隐藏到了"辅助功能->鼠标与触控板->触控板选项->启用拖拽->三指", 没太明白为什么隐藏这么深, 这么好用的功能.

* `Cmd + Shift + 3`, 全屏截屏
* `Cmd + shift + 4`, 区域截屏


除了以上, 如果你选择将`Caps Lock`映射到`Ctrl`, 那么以下快捷键会非常方便: `<C-h>`可替代`<bs>`删除键. 且在大部分的行编辑框, 如命令行, 各种语言的`REPL`中, `vim`的命令行模式, 浏览器的`console`控制台等等, 都可以应用`<C-u>`删除到行头. 部分还可以应用`<C-b>`光标后退一个字符, `<C-f>`光标前进一个字符, `<C-w>`删除一个单词.

## 安装程序

安装一般的命令行工具推荐使用brew, 可参考brew.md文件. 当然, 你也可以编译安装, 但要提前安装庞大的`xcode`编程环境. 

有图形界面的程序, 虽然一部分可通过`Caskroom/cask`库源安装, 但大部分是通过App Store或程序官网下载`.dmg`或`.pkg`文件安装.

通常, `.dmg`格式, 直接在界面中将程序拖放到应用程序目录即可. `.pkg`格式则会提供类似Windows下的`next..next..`安装方式.

也有直接放出`.app`格式的程序, 这样直接将其拖放到应用程序目录即可.

通常, "应用程序"目录的程序都是单个程序, 没有别的文件, `Cmd+del`删除就是删除了. 

## 启动程序

除了可设置单独的快捷键来启动程序外, 更常用的是使用Spotlight来启动, 快捷键`Ctrl + Space`, 输入程序名回车即可. 虽然固定在docker上的程序也可通过docker点击启动, 但屏幕就那么大, 我通常隐藏它.

关于spotlight还有别的更多用法, 像直接输入表达式计算, 汇率换算等. 

`Alfred`提供更强的功能. 因此, 我选择将`Ctrl + Space`快捷键给`Alfred`.

关闭spotlight服务: `sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist`, 将`unload`改为`load`即为开启.

好吧, 我真是太年纪了, Alfred也也使用spotlight服务, 因此, 如果使用Alfred请不要进行上一个操作.

## 输入法

得益于iphone的强势, 也带动了mac的销量, 进而带动了国内mac软件的开发. 大部分国内的软件都有mac版本, 只是更新不一样而已, 这点要比Linux好出不少.

这里重点推荐一下百度的五笔输入法, 真把我感动哭了, 第一次用到跟极点五笔一样好的五笔98输入法, 再也不用在Linux折腾Ibus了.

最近百度输入法抽风了, 不知道怎么回事, 在知乎搜索了下, 在试清歌输入法, 目前感觉良好.

## 资源管理器

Finder, 挺渣的, 将就着用. `Cmd + ,`打开偏好设置, 设置默认打开"当前用户主目录", 设置侧边栏有用户主目录. 在顶部菜单的显示, 设置显示路径栏和状态栏. 这样设置后还能用.

但有几个比较好的功能, 如支持多标签, 支持空格预览QuickLook. 但默认的快速预览文本文件只支持txt, 别的格式不支持, 可通过安装插件的方式来加强预览功能. 

插件有些为`.pkg`格式的, 也有`.qlgenerator`格式的, 可直接复制到`/Library/QuickLook/`目录下. 如果只为本用户安装, 可复制到`~/Library/QuickLook/`目录下.再运行`qlmanage -r`重启服务.

常用文本文件的预览插件, 如各种编程语言的源代码, json和md文件.

## 开发者工具

Dash用于查看技术文档, 免费, 但偶尔会请求付费. 基本上经常使用的文档都有, 包含编程语言及其标准库, 常用框架等.

Foxit PDF阅读器, 开发者总要看文档吧, 系统自带的Preview的标注功能有点恶心, 点击矩形直接在文档中间出现个很大的矩形框, 你再缩小移动, 太反人类了. App Store上提供有很多的PDF阅读器, 但在Windows上我习惯使用Foxit, 而它恰好有mac版本, 不带广告, 免费, 有种App Store上所有收费的都会死的节奏.

只是, 给Foxit设置标注快捷键是个蛋疼的事. 只能通过OSX的系统设置进行. "系统偏好设置->键盘->快捷键->应用快捷键", 点击"+"号, 为指定应用Foxit添加快捷键. 其中"菜单标题"就是在Foxit的顶部菜单中, 找到你要设置快捷键的操作名, 比如"Comments->Highline Text", 此处写"Highline Text", 快捷键你就直接按即可. 似乎Mac OS X上各种应用的快捷键原理都是这样的, 真不知道这种设计是直观呢还是蛋疼呢. 但有信仰什么都不是事.

新的注意, 在阅读时, 只有点击工具栏, 位于中间上面, comments才会进行注释.

虽然触控板已经够好用了, PDF标注还是用鼠标好了.

## 命令行工具

`open`, 用默认应用程序打开文件, 跟双击类似. `open .`以`Finder`打开当前目录, 从`Finder`拖文件到终端, 就等同于把文件的完整路径粘贴到命令行中.

`pbcopy`是复制, `pbpaste`是粘贴. 如`ls | pbcopy`将当前目录的文件信息复制到剪贴板, `pbcopy < blogpost.txt`把文件复制到剪贴板. `pbpaste >> tasklist.txt`将剪贴板内容写入文件.

`mdfind`可以像`spotlight`一样工作, 在命令行下. `mdfind -onlyin . test`在当前文件夹下搜索匹配`test`的文件, 模糊搜索, 不需要指定正则. `mdutil`可以诊断搜索数据库的问题.

`screencapture`命令行截图. 

`launchctl`管理系统启动脚本, 控制启动计算机时需要开启的服务, 也可以设置定时执行特定任务的脚本.

`say`是文本转语音的工具.

`diskutil`是磁盘工具.

## 字体

`mac`字体文件主要存放在两个目录中: `/System/Library/Fonts`和`/Library/Fonts`.

安装新字体, 就是将字体文件`.ttf`或`.ttc`拷贝到上述目录.

至于两种字体格式的区别: `.ttc`文件可包含多种字体, 而`.ttf`则只是一种字体. 但并非简单打包.
